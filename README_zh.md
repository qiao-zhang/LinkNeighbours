# LinkNeighbours

LinkNeighbours 是一个 Anki 插件，允许用户自定义规则在同类型的相邻笔记间复制内容。这对于笔记间上下文相关的情况特别有用。

## 功能特点

- **可自定义链接规则**：为不同笔记类型定义内容如何在相邻笔记（上一个/下一个）之间复制
- **双向链接**：支持两个方向的内容复制（从前一个到后一个，反之亦然）
- **上下文菜单集成**：通过右键单击上下文菜单在复习期间轻松访问链接功能
- **特定笔记类型的规则**：为集合中的不同笔记类型设置不同的链接规则
- **国际化**：支持英文和中文界面

## 安装

1. 打开 Anki
2. 转到 `工具` → `插件` → `获取插件`
3. 输入插件代码（待发布）
4. 重启 Anki

或者，您可以通过将插件文件放置在 Anki 插件文件夹中来手动安装。

## 使用方法

### 创建链接规则

1. 转到 `工具` → `链接相邻笔记` → `新建链接规则集`
2. 选择要为其创建规则的笔记类型
3. 定义内容复制方式：
   - "从后者到前者"：内容如何从前一个笔记流向当前/后一个笔记
   - "从前者到后者"：内容如何从当前/前一个笔记流向后一个笔记
4. 添加指定源字段和目标字段的规则
5. 保存规则集

### 在复习期间使用链接功能

在复习会话期间，您可以使用以下选项：

- 右键单击以打开上下文菜单
- 选择以下选项之一：
  - "链接相邻笔记：从前一个笔记复制内容"：从前一个笔记复制内容到当前笔记
  - "链接相邻笔记：从后一个笔记复制内容"：从后一个笔记复制内容到当前笔记
  - "链接相邻笔记：与前一个笔记双向链接"：与前一个笔记进行双向内容复制
  - "链接相邻笔记：与后一个笔记双向链接"：与后一个笔记进行双向内容复制

## 配置

插件将其配置存储在插件目录中的 `rules.json` 中。每个规则集定义：

- `note_type`：规则适用的笔记类型
- `forward_rules`：从前一个笔记到后一个的复制规则（下一个 → 上一个）
- `backward_rules`：从后一个笔记到前一个的复制规则（上一个 → 下一个）

示例配置：
```json
{
  "Subs2Anki": {
    "note_type": "Subs2Anki",
    "forward_rules": [
      {
        "source_field": "CurrentBack",
        "target_field": "After"
      },
      {
        "source_field": "Audio",
        "target_field": "AfterAudio"
      }
    ],
    "backward_rules": [
      {
        "source_field": "CurrentBack",
        "target_field": "Before"
      },
      {
        "source_field": "Audio",
        "target_field": "BeforeAudio"
      }
    ]
  }
}
```

## 支持的字段

该插件适用于您的笔记类型中的任何字段。常见用例包括：

- 在连续卡片之间共享音频文件
- 复制定义或翻译
- 链接相关词汇
- 传播例句

## 故障排除

- 如果在排序列表中找不到笔记，请确保它们是正确的笔记类型
- 在尝试链接笔记之前，请确保已为您的笔记类型定义了链接规则
- 笔记按笔记类型配置中定义的排序字段进行排序

## 贡献

欢迎贡献！请随时在 GitHub 存储库上提交问题和拉取请求。

## 许可证

MIT 许可证。有关更多信息，请参阅 LICENSE 文件。